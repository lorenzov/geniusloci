<!DOCTYPE html>
<html>
<head>



<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css" media="screen">@import "/static/iui.css";</style>
<script type="application/x-javascript" src="/static/iui.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&region=IT">
</script>
<script type="text/javascript">
  
var places = [
{%for place in places%}
['{{place.name}}',{{place.geolat}}, {{place.geolong}}, {{place.id}}, '{{place.slug}}' ],
{%endfor%}
];
  function initializeMap(lat, longt) {
	
    var latlng = new google.maps.LatLng({{lat}}, {{lon}});
    var myOptions = {
      zoom: 16,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

	//current location marker
	var image = new google.maps.MarkerImage('http://www.tourdeturtles.org/markers/placemark_circle.png',
	      // This marker is 20 pixels wide by 32 pixels tall.
	      new google.maps.Size(32, 32),
	      // The origin for this image is 0,0.
	      new google.maps.Point(0,0),
	      // The anchor for this image is the base of the flagpole at 0,32.
	      new google.maps.Point(0, 32));
	var marker = new google.maps.Marker({
		position: latlng,
		map: map,
		title: 'Current location',
		icon: image,
		zIndex: 0
	});
		{%for place in places%}
		    var myLatLng = new google.maps.LatLng({{place.geolat}}, {{place.geolong}});
		    var marker = new google.maps.Marker({
		        position: myLatLng,
		        map: map,
		        title: '{{place.name}}',
				zIndex: {{forloop.counter}}
		    });
			
			google.maps.event.addListener(marker, 'click', function(i) {
				var url = '/mobile/p/{{place.slug}}/{{place.id}}/';
			    window.location = url;
			  });

  		{%endfor%}
  }
</script>



</head>
<body onload="initializeMap()">
	<div class="toolbar">
	         <h1 id="pageTitle">Geniusloci</h1>
	        <a id="backButton" class="button" href="/map/"></a>
	
	
	<div class="panelmap" id="mapdiv">
	<div id="map_canvas" ></div>
	</div>
</body>

