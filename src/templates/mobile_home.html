<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&region=IT">
</script>
<script type="text/javascript">
  function initializeMap(lat, longt) {
    var latlng = new google.maps.LatLng(lat, longt);
    var myOptions = {
      zoom: 14,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

	var marker = new google.maps.Marker({
		        position: latlng, 
		        map: map,
		        title:"You are here!"
	});
  }

</script>

<script>
function geolocalize(){
		navigator.geolocation.getCurrentPosition(success, fail);

}

function success(position) // 'position' can be named anything
{
	initializeMap(position.coords.latitude, position.coords.longitude);
	//window.location ='/mobile/geo/?lat=' + position.coords.latitude + '&lon=' + position.coords.longitude; 

}

function fail(){
	document.write('fail');
}
</script>

</head>
<body onload="geolocalize()">
	
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>

